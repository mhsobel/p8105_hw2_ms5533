Homework 2
================
Marisa Sobel
9/28/2018

## Problem 1

  - Read and clean data

  - Retain: `line, station, name, station latitude/longidute, routes
    served, entry, vending, entrance type, ADA compliance`

  - Convert `entry` from character to logical

<!-- end list -->

``` r
nyctransit_data = 
  read_csv("./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>% 
  janitor::clean_names() %>% 
  select(line, starts_with("station"), starts_with("route"), entrance_type, 
         entry, vending, ada) %>% 
  mutate(entry = recode(entry, "YES" = TRUE, "NO" = FALSE))
nyctransit_data
```

    ## # A tibble: 1,868 x 20
    ##    line   station_name station_latitude station_longitu… station_location 
    ##    <chr>  <chr>                   <dbl>            <dbl> <chr>            
    ##  1 4 Ave… 25th St                  40.7            -74.0 (40.660397, -73.…
    ##  2 4 Ave… 25th St                  40.7            -74.0 (40.660397, -73.…
    ##  3 4 Ave… 36th St                  40.7            -74.0 (40.655144, -74.…
    ##  4 4 Ave… 36th St                  40.7            -74.0 (40.655144, -74.…
    ##  5 4 Ave… 36th St                  40.7            -74.0 (40.655144, -74.…
    ##  6 4 Ave… 45th St                  40.6            -74.0 (40.648939, -74.…
    ##  7 4 Ave… 45th St                  40.6            -74.0 (40.648939, -74.…
    ##  8 4 Ave… 45th St                  40.6            -74.0 (40.648939, -74.…
    ##  9 4 Ave… 45th St                  40.6            -74.0 (40.648939, -74.…
    ## 10 4 Ave… 53rd St                  40.6            -74.0 (40.645069, -74.…
    ## # ... with 1,858 more rows, and 15 more variables: route1 <chr>,
    ## #   route2 <chr>, route3 <chr>, route4 <chr>, route5 <chr>, route6 <chr>,
    ## #   route7 <chr>, route8 <int>, route9 <int>, route10 <int>,
    ## #   route11 <int>, entrance_type <chr>, entry <lgl>, vending <chr>,
    ## #   ada <lgl>

### About `nyctransit_data`

The tibble created has 1,868 observations and 20 columns. It includes
variables that describe the following: line (`line`), station name
(`station_name`), station latitude (`station_latitude`), station
longitude (`station_longitude`), station location as concatinated
long/lat (`station_location`), entrance type (`entrance_type`), entry
(`entry`), vending (`vending`), ADA compliance (`ada`), and all of the
different route numbers. Most are variables with individual values
except for the `route(#)` columns. This means that the data are not
tidy, as there are missing values marked as “NA” in the `route(#)`
columns.

### Questions

1.  How many distict stations are there?

<!-- end list -->

``` r
distinct(nyctransit_data, line, station_name, .keep_all = FALSE)
```

    ## # A tibble: 465 x 2
    ##    line     station_name            
    ##    <chr>    <chr>                   
    ##  1 4 Avenue 25th St                 
    ##  2 4 Avenue 36th St                 
    ##  3 4 Avenue 45th St                 
    ##  4 4 Avenue 53rd St                 
    ##  5 4 Avenue 59th St                 
    ##  6 4 Avenue 77th St                 
    ##  7 4 Avenue 86th St                 
    ##  8 4 Avenue 95th St                 
    ##  9 4 Avenue 9th St                  
    ## 10 4 Avenue Atlantic Av-Barclays Ctr
    ## # ... with 455 more rows

There are **465 distinct stations**, identified by both station name and
line.

2.  How many stations are ADA compliant?

<!-- end list -->

``` r
filter(nyctransit_data, ada == TRUE)
```

    ## # A tibble: 468 x 20
    ##    line   station_name  station_latitude station_longitu… station_location
    ##    <chr>  <chr>                    <dbl>            <dbl> <chr>           
    ##  1 4 Ave… Atlantic Av-…             40.7            -74.0 (40.683666, -73…
    ##  2 4 Ave… DeKalb Av                 40.7            -74.0 (40.690635, -73…
    ##  3 4 Ave… DeKalb Av                 40.7            -74.0 (40.690635, -73…
    ##  4 4 Ave… DeKalb Av                 40.7            -74.0 (40.690635, -73…
    ##  5 4 Ave… DeKalb Av                 40.7            -74.0 (40.690635, -73…
    ##  6 4 Ave… DeKalb Av                 40.7            -74.0 (40.690635, -73…
    ##  7 4 Ave… DeKalb Av                 40.7            -74.0 (40.690635, -73…
    ##  8 4 Ave… Pacific St                40.7            -74.0 (40.683666, -73…
    ##  9 4 Ave… Pacific St                40.7            -74.0 (40.683666, -73…
    ## 10 42nd … Grand Central             40.8            -74.0 (40.752769, -73…
    ## # ... with 458 more rows, and 15 more variables: route1 <chr>,
    ## #   route2 <chr>, route3 <chr>, route4 <chr>, route5 <chr>, route6 <chr>,
    ## #   route7 <chr>, route8 <int>, route9 <int>, route10 <int>,
    ## #   route11 <int>, entrance_type <chr>, entry <lgl>, vending <chr>,
    ## #   ada <lgl>

**468 stations** are ADA compliant.

3.  What proportion of station entracnes/exits without vending allow
    entrence?

<!-- end list -->

``` r
filter(nyctransit_data, vending == "NO") %>% 
  filter(entry == TRUE)
```

    ## # A tibble: 69 x 20
    ##    line   station_name station_latitude station_longitu… station_location 
    ##    <chr>  <chr>                   <dbl>            <dbl> <chr>            
    ##  1 4 Ave… 9th St                   40.7            -74.0 (40.670847, -73.…
    ##  2 6 Ave… 7th Av                   40.7            -74.0 (40.666271, -73.…
    ##  3 6 Ave… 7th Av                   40.7            -74.0 (40.666271, -73.…
    ##  4 6 Ave… 7th Av                   40.7            -74.0 (40.666271, -73.…
    ##  5 6 Ave… 7th Av                   40.7            -74.0 (40.666271, -73.…
    ##  6 6 Ave… 7th Av                   40.7            -74.0 (40.666271, -73.…
    ##  7 6 Ave… 7th Av                   40.7            -74.0 (40.666271, -73.…
    ##  8 6 Ave… 7th Av                   40.7            -74.0 (40.666271, -73.…
    ##  9 6 Ave… 7th Av                   40.7            -74.0 (40.666271, -73.…
    ## 10 6 Ave… Bergen St                40.7            -74.0 (40.686145, -73.…
    ## # ... with 59 more rows, and 15 more variables: route1 <chr>,
    ## #   route2 <chr>, route3 <chr>, route4 <chr>, route5 <chr>, route6 <chr>,
    ## #   route7 <chr>, route8 <int>, route9 <int>, route10 <int>,
    ## #   route11 <int>, entrance_type <chr>, entry <lgl>, vending <chr>,
    ## #   ada <lgl>

**69/183 stations** without vending allow entrance.

### Reformat

Make route number and route name distinct variables. How many distinct
stations serve the A train? Of stations that serve the A train, how many
are ADA compliant?

``` r
nyctransit_data_tidy = gather(nyctransit_data, key = route_number,
                              value = route_name, route1:route11) %>% 
  filter(route_name == "A") %>% 
  distinct(line, station_name, .keep_all = TRUE) %>% 
  filter(ada == TRUE)
```

**60 distinct stations** serve the A train. **17** of those stations are
ADA compliant.

## Problem 2

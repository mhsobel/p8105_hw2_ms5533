Homework 2
================
Marisa Sobel
9/28/2018

## Problem 1

  - Read and clean data

  - Retain: `line, station, name, station latitude/longidute, routes
    served, entry, vending, entrance type, ADA compliance`

  - Convert `entry` from character to logical

<!-- end list -->

``` r
nyctransit_data = 
  read_csv("./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>% 
  janitor::clean_names() %>% 
  select(line, starts_with("station"), starts_with("route"), entrance_type, 
         entry, vending, ada) %>% 
  mutate(entry = recode(entry, "YES" = TRUE, "NO" = FALSE))
nyctransit_data
```

    ## # A tibble: 1,868 x 20
    ##    line   station_name station_latitude station_longitu… station_location 
    ##    <chr>  <chr>                   <dbl>            <dbl> <chr>            
    ##  1 4 Ave… 25th St                  40.7            -74.0 (40.660397, -73.…
    ##  2 4 Ave… 25th St                  40.7            -74.0 (40.660397, -73.…
    ##  3 4 Ave… 36th St                  40.7            -74.0 (40.655144, -74.…
    ##  4 4 Ave… 36th St                  40.7            -74.0 (40.655144, -74.…
    ##  5 4 Ave… 36th St                  40.7            -74.0 (40.655144, -74.…
    ##  6 4 Ave… 45th St                  40.6            -74.0 (40.648939, -74.…
    ##  7 4 Ave… 45th St                  40.6            -74.0 (40.648939, -74.…
    ##  8 4 Ave… 45th St                  40.6            -74.0 (40.648939, -74.…
    ##  9 4 Ave… 45th St                  40.6            -74.0 (40.648939, -74.…
    ## 10 4 Ave… 53rd St                  40.6            -74.0 (40.645069, -74.…
    ## # ... with 1,858 more rows, and 15 more variables: route1 <chr>,
    ## #   route2 <chr>, route3 <chr>, route4 <chr>, route5 <chr>, route6 <chr>,
    ## #   route7 <chr>, route8 <int>, route9 <int>, route10 <int>,
    ## #   route11 <int>, entrance_type <chr>, entry <lgl>, vending <chr>,
    ## #   ada <lgl>

### About `nyctransit_data`

The tibble created has 1,868 observations and 20 columns. It includes
variables that describe the following: line (`line`), station name
(`station_name`), station latitude (`station_latitude`), station
longitude (`station_longitude`), station location as concatinated
long/lat (`station_location`), entrance type (`entrance_type`), entry
(`entry`), vending (`vending`), ADA compliance (`ada`), and all of the
different route numbers. Most are variables with individual values
except for the `route(#)` columns. This means that the data are not
tidy, as there are missing values marked as “NA” in the `route(#)`
columns.

### Questions

1.  How many distict stations are there?

<!-- end list -->

``` r
distinct(nyctransit_data, line, station_name, .keep_all = FALSE)
```

    ## # A tibble: 465 x 2
    ##    line     station_name            
    ##    <chr>    <chr>                   
    ##  1 4 Avenue 25th St                 
    ##  2 4 Avenue 36th St                 
    ##  3 4 Avenue 45th St                 
    ##  4 4 Avenue 53rd St                 
    ##  5 4 Avenue 59th St                 
    ##  6 4 Avenue 77th St                 
    ##  7 4 Avenue 86th St                 
    ##  8 4 Avenue 95th St                 
    ##  9 4 Avenue 9th St                  
    ## 10 4 Avenue Atlantic Av-Barclays Ctr
    ## # ... with 455 more rows

There are **465 distinct stations**, identified by both station name and
line.

2.  How many stations are ADA compliant?

<!-- end list -->

``` r
filter(nyctransit_data, ada == TRUE)
```

    ## # A tibble: 468 x 20
    ##    line   station_name  station_latitude station_longitu… station_location
    ##    <chr>  <chr>                    <dbl>            <dbl> <chr>           
    ##  1 4 Ave… Atlantic Av-…             40.7            -74.0 (40.683666, -73…
    ##  2 4 Ave… DeKalb Av                 40.7            -74.0 (40.690635, -73…
    ##  3 4 Ave… DeKalb Av                 40.7            -74.0 (40.690635, -73…
    ##  4 4 Ave… DeKalb Av                 40.7            -74.0 (40.690635, -73…
    ##  5 4 Ave… DeKalb Av                 40.7            -74.0 (40.690635, -73…
    ##  6 4 Ave… DeKalb Av                 40.7            -74.0 (40.690635, -73…
    ##  7 4 Ave… DeKalb Av                 40.7            -74.0 (40.690635, -73…
    ##  8 4 Ave… Pacific St                40.7            -74.0 (40.683666, -73…
    ##  9 4 Ave… Pacific St                40.7            -74.0 (40.683666, -73…
    ## 10 42nd … Grand Central             40.8            -74.0 (40.752769, -73…
    ## # ... with 458 more rows, and 15 more variables: route1 <chr>,
    ## #   route2 <chr>, route3 <chr>, route4 <chr>, route5 <chr>, route6 <chr>,
    ## #   route7 <chr>, route8 <int>, route9 <int>, route10 <int>,
    ## #   route11 <int>, entrance_type <chr>, entry <lgl>, vending <chr>,
    ## #   ada <lgl>

**468 stations** are ADA compliant.

3.  What proportion of station entracnes/exits without vending allow
    entrence?

<!-- end list -->

``` r
filter(nyctransit_data, vending == "NO") %>% 
  filter(entry == TRUE)
```

    ## # A tibble: 69 x 20
    ##    line   station_name station_latitude station_longitu… station_location 
    ##    <chr>  <chr>                   <dbl>            <dbl> <chr>            
    ##  1 4 Ave… 9th St                   40.7            -74.0 (40.670847, -73.…
    ##  2 6 Ave… 7th Av                   40.7            -74.0 (40.666271, -73.…
    ##  3 6 Ave… 7th Av                   40.7            -74.0 (40.666271, -73.…
    ##  4 6 Ave… 7th Av                   40.7            -74.0 (40.666271, -73.…
    ##  5 6 Ave… 7th Av                   40.7            -74.0 (40.666271, -73.…
    ##  6 6 Ave… 7th Av                   40.7            -74.0 (40.666271, -73.…
    ##  7 6 Ave… 7th Av                   40.7            -74.0 (40.666271, -73.…
    ##  8 6 Ave… 7th Av                   40.7            -74.0 (40.666271, -73.…
    ##  9 6 Ave… 7th Av                   40.7            -74.0 (40.666271, -73.…
    ## 10 6 Ave… Bergen St                40.7            -74.0 (40.686145, -73.…
    ## # ... with 59 more rows, and 15 more variables: route1 <chr>,
    ## #   route2 <chr>, route3 <chr>, route4 <chr>, route5 <chr>, route6 <chr>,
    ## #   route7 <chr>, route8 <int>, route9 <int>, route10 <int>,
    ## #   route11 <int>, entrance_type <chr>, entry <lgl>, vending <chr>,
    ## #   ada <lgl>

**69/183 stations** without vending allow entrance.

### Reformat

Make route number and route name distinct variables. How many distinct
stations serve the A train? Of stations that serve the A train, how many
are ADA compliant?

``` r
nyctransit_data_tidy = gather(nyctransit_data, key = route_number,
                              value = route_name, route1:route11) %>% 
  filter(route_name == "A") %>% 
  distinct(line, station_name, .keep_all = TRUE) %>% 
  filter(ada == TRUE)
```

**60 distinct stations** serve the A train. **17** of those stations are
ADA compliant.

## Problem 2

Read and clean `HealthyHarborWaterWheelTotals2017-9-26.xlsx`

  - Specify the sheet in the Excel file and to omit columns containing
    notes (using the `range` argument and `cell_cols()` function)
  - Use reasonable variable names
  - Omit rows that do not include dumpster-specific data
  - Rounds the number of sports balls to the nearest integer and
    converts the result to an integer variable (using `as.integer`)

<!-- end list -->

``` r
trashwheel_data = 
  read_excel("./data/HealthyHarborWaterWheelTotals2017-9-26.xlsx", 
             sheet = "Mr. Trash Wheel", range = cell_cols("A:N")) %>% 
  janitor::clean_names() %>% 
  filter(!is.na(year)) %>% 
  mutate(sports_balls = as.integer(sports_balls))
```

Read and clean precipitation data for 2016 and 2017.

  - Omit rows without precipitation data and add a variable year

<!-- end list -->

``` r
precip_2016 = 
  read_excel("./data/HealthyHarborWaterWheelTotals2017-9-26.xlsx", 
             sheet = "2016 Precipitation") %>% 
  janitor::clean_names() %>% 
  rename(month = precipitation_in, total = x_1) %>%
  filter(!is.na(month), !is.na(total),
         month != "Month", total != "Total") %>% 
  mutate(
    total = as.numeric(total),
    year = "2016")
precip_2016
```

    ## # A tibble: 12 x 3
    ##    month total year 
    ##    <chr> <dbl> <chr>
    ##  1 1     3.23  2016 
    ##  2 2     5.32  2016 
    ##  3 3     2.24  2016 
    ##  4 4     1.78  2016 
    ##  5 5     5.19  2016 
    ##  6 6     3.20  2016 
    ##  7 7     6.09  2016 
    ##  8 8     3.96  2016 
    ##  9 9     4.53  2016 
    ## 10 10    0.620 2016 
    ## 11 11    1.47  2016 
    ## 12 12    2.32  2016

``` r
precip_2017 = 
  read_excel("./data/HealthyHarborWaterWheelTotals2017-9-26.xlsx", 
             sheet = "2017 Precipitation") %>% 
  janitor::clean_names() %>% 
  rename(month = precipitation_in, total = x_1) %>% 
  filter(!is.na(month), !is.na(total), 
         month != "Month", total != "Total") %>% 
  mutate(
    total = as.numeric(total),
    year = "2017")
precip_2017
```

    ## # A tibble: 8 x 3
    ##   month total year 
    ##   <chr> <dbl> <chr>
    ## 1 1      2.34 2017 
    ## 2 2      1.46 2017 
    ## 3 3      3.57 2017 
    ## 4 4      3.99 2017 
    ## 5 5      5.64 2017 
    ## 6 6      1.40 2017 
    ## 7 7      7.09 2017 
    ## 8 8      4.44 2017

  - Combine datasets and convert month to a character variable

<!-- end list -->

``` r
precip_tidy = bind_rows(precip_2016, precip_2017) %>% 
  mutate(month = month.name[month]) 
```

### About `trashwheel_data` and `precip_tidy`

## Problem 3

Homework 2
================
Marisa Sobel
9/28/2018

## Problem 1

  - *_Read and clean data_*

  - *_Retain: `line, station, name, station latitude/longidute, routes
    served, entry, vending, entrance type, ADA compliance`_*

  - *_Convert `entry` from character to logical_*

<!-- end list -->

``` r
# import transit data, clean, select relevant vars, recode 'entry'

nyctransit_data = 
  read_csv("./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>%
  janitor::clean_names() %>% 
  select(line, station_name, station_latitude, 
         station_longitude, starts_with("route"), 
         entrance_type, entry, vending, ada) %>% 
  mutate(entry = recode(entry, "YES" = TRUE, "NO" = FALSE))
```

    ## Parsed with column specification:
    ## cols(
    ##   .default = col_character(),
    ##   `Station Latitude` = col_double(),
    ##   `Station Longitude` = col_double(),
    ##   Route8 = col_integer(),
    ##   Route9 = col_integer(),
    ##   Route10 = col_integer(),
    ##   Route11 = col_integer(),
    ##   ADA = col_logical(),
    ##   `Free Crossover` = col_logical(),
    ##   `Entrance Latitude` = col_double(),
    ##   `Entrance Longitude` = col_double()
    ## )

    ## See spec(...) for full column specifications.

``` r
nyctransit_data
```

    ## # A tibble: 1,868 x 19
    ##    line     station_name station_latitude station_longitude route1 route2
    ##    <chr>    <chr>                   <dbl>             <dbl> <chr>  <chr> 
    ##  1 4 Avenue 25th St                  40.7             -74.0 R      <NA>  
    ##  2 4 Avenue 25th St                  40.7             -74.0 R      <NA>  
    ##  3 4 Avenue 36th St                  40.7             -74.0 N      R     
    ##  4 4 Avenue 36th St                  40.7             -74.0 N      R     
    ##  5 4 Avenue 36th St                  40.7             -74.0 N      R     
    ##  6 4 Avenue 45th St                  40.6             -74.0 R      <NA>  
    ##  7 4 Avenue 45th St                  40.6             -74.0 R      <NA>  
    ##  8 4 Avenue 45th St                  40.6             -74.0 R      <NA>  
    ##  9 4 Avenue 45th St                  40.6             -74.0 R      <NA>  
    ## 10 4 Avenue 53rd St                  40.6             -74.0 R      <NA>  
    ## # ... with 1,858 more rows, and 13 more variables: route3 <chr>,
    ## #   route4 <chr>, route5 <chr>, route6 <chr>, route7 <chr>, route8 <int>,
    ## #   route9 <int>, route10 <int>, route11 <int>, entrance_type <chr>,
    ## #   entry <lgl>, vending <chr>, ada <lgl>

### About `nyctransit_data`

The tibble created has **1868** observations and **19** columns. It
includes variables that describe the following: line (`line`), station
name (`station_name`), station latitude (`station_latitude`), station
longitude (`station_longitude`), entrance type (`entrance_type`), entry
(`entry`), vending (`vending`), ADA compliance (`ada`), and all of the
different route numbers. Most are variables with individual values
except for the `route(#)` columns. This means that the data are not
tidy, as there are missing values marked as “NA” in the `route(#)`
columns.

### Questions

1.  *_How many distict stations are there?_*

<!-- end list -->

``` r
# distinct statations by 'line' and 'station name'

distinct(nyctransit_data, line, station_name)
```

    ## # A tibble: 465 x 2
    ##    line     station_name            
    ##    <chr>    <chr>                   
    ##  1 4 Avenue 25th St                 
    ##  2 4 Avenue 36th St                 
    ##  3 4 Avenue 45th St                 
    ##  4 4 Avenue 53rd St                 
    ##  5 4 Avenue 59th St                 
    ##  6 4 Avenue 77th St                 
    ##  7 4 Avenue 86th St                 
    ##  8 4 Avenue 95th St                 
    ##  9 4 Avenue 9th St                  
    ## 10 4 Avenue Atlantic Av-Barclays Ctr
    ## # ... with 455 more rows

There are **465 distinct stations**, identified by both station name and
line.

2.  *_How many stations are ADA compliant?_*

<!-- end list -->

``` r
# distinct stations with ADA compliance

distinct(nyctransit_data, line, station_name, .keep_all = TRUE) %>% 
  filter(ada == TRUE)
```

    ## # A tibble: 84 x 19
    ##    line    station_name    station_latitude station_longitu… route1 route2
    ##    <chr>   <chr>                      <dbl>            <dbl> <chr>  <chr> 
    ##  1 4 Aven… Atlantic Av-Ba…             40.7            -74.0 B      Q     
    ##  2 4 Aven… DeKalb Av                   40.7            -74.0 B      Q     
    ##  3 4 Aven… Pacific St                  40.7            -74.0 B      Q     
    ##  4 42nd S… Grand Central               40.8            -74.0 GS     4     
    ##  5 6 Aven… 34th St                     40.7            -74.0 B      D     
    ##  6 6 Aven… 47-50th Sts Ro…             40.8            -74.0 B      D     
    ##  7 6 Aven… Church Av                   40.6            -74.0 F      <NA>  
    ##  8 63rd S… 21st St                     40.8            -73.9 F      <NA>  
    ##  9 63rd S… Lexington Av                40.8            -74.0 F      <NA>  
    ## 10 63rd S… Roosevelt Isla…             40.8            -74.0 F      <NA>  
    ## # ... with 74 more rows, and 13 more variables: route3 <chr>,
    ## #   route4 <chr>, route5 <chr>, route6 <chr>, route7 <chr>, route8 <int>,
    ## #   route9 <int>, route10 <int>, route11 <int>, entrance_type <chr>,
    ## #   entry <lgl>, vending <chr>, ada <lgl>

**84 stations** are ADA compliant.

3.  *_What proportion of station entrances/exits without vending allow
    entrence?_*

<!-- end list -->

``` r
# proportion entrances/exits w/o vending that allow entry

filter(nyctransit_data, vending == "NO") %>% 
  filter(entry == TRUE)
```

    ## # A tibble: 69 x 19
    ##    line     station_name station_latitude station_longitude route1 route2
    ##    <chr>    <chr>                   <dbl>             <dbl> <chr>  <chr> 
    ##  1 4 Avenue 9th St                   40.7             -74.0 F      G     
    ##  2 6 Avenue 7th Av                   40.7             -74.0 F      <NA>  
    ##  3 6 Avenue 7th Av                   40.7             -74.0 F      <NA>  
    ##  4 6 Avenue 7th Av                   40.7             -74.0 F      <NA>  
    ##  5 6 Avenue 7th Av                   40.7             -74.0 F      <NA>  
    ##  6 6 Avenue 7th Av                   40.7             -74.0 F      <NA>  
    ##  7 6 Avenue 7th Av                   40.7             -74.0 F      <NA>  
    ##  8 6 Avenue 7th Av                   40.7             -74.0 F      <NA>  
    ##  9 6 Avenue 7th Av                   40.7             -74.0 F      <NA>  
    ## 10 6 Avenue Bergen St                40.7             -74.0 F      G     
    ## # ... with 59 more rows, and 13 more variables: route3 <chr>,
    ## #   route4 <chr>, route5 <chr>, route6 <chr>, route7 <chr>, route8 <int>,
    ## #   route9 <int>, route10 <int>, route11 <int>, entrance_type <chr>,
    ## #   entry <lgl>, vending <chr>, ada <lgl>

**69/183 stations** or **37% of stations** without vending allow
entrance.

### Reformat

*_Make route number and route name distinct variables. How many distinct
stations serve the A train? Of stations that serve the A train, how many
are ADA compliant?_*

``` r
# wide to long format for 'route', new key = 'route_number'
# filter for A train, then distinct stations
# of those, number many ADA compliant

nyctransit_data_tidy = gather(nyctransit_data, key = route_number,
                              value = route_name, route1:route11) %>% 
  filter(route_name == "A") %>% 
  distinct(line, station_name, .keep_all = TRUE) %>% 
  filter(ada == TRUE)
```

**60 distinct stations** serve the A train. **17** of those stations are
ADA compliant.

## Problem 2

*_Read and clean `HealthyHarborWaterWheelTotals2017-9-26.xlsx`_*

``` r
# import trash wheel data with relevant columbs (no notes) clean names
# remove rows without dumpster data, remove final sum at end
# make sports_balls numeric 

trashwheel_data = 
  read_excel("./data/HealthyHarborWaterWheelTotals2017-9-26.xlsx", 
             sheet = "Mr. Trash Wheel", range = cell_cols("A:N")) %>% 
  janitor::clean_names() %>% 
  filter(!is.na(dumpster), dumpster != 23220) %>% 
  mutate(sports_balls = as.integer(sports_balls))
```

*_Read and clean precipitation data for 2016 and 2017. Omit rows without
precipitation data and add a variable
year._*

``` r
# import 2016 precip data, clean names, rename col, remove NAs, make all col numeric, add 'year' var

precip_2016 = 
  read_excel("./data/HealthyHarborWaterWheelTotals2017-9-26.xlsx", 
             sheet = "2016 Precipitation") %>% 
  janitor::clean_names() %>% 
  rename(month = precipitation_in, total_precip = x_1) %>%
  filter(!is.na(month), !is.na(total_precip),
         month != "Month", total_precip != "Total") %>% 
  mutate(
    month = as.numeric(month),
    total_precip = as.numeric(total_precip),
    year = "2016")

# import 2017 precip data, repeate above

precip_2017 = 
  read_excel("./data/HealthyHarborWaterWheelTotals2017-9-26.xlsx", 
             sheet = "2017 Precipitation") %>% 
  janitor::clean_names() %>% 
  rename(month = precipitation_in, total_precip = x_1) %>% 
  filter(!is.na(month), !is.na(total_precip), 
         month != "Month", total_precip != "Total") %>% 
  mutate(
    month = as.numeric(month),
    total_precip = as.numeric(total_precip),
    year = "2017")
```

*_Combine datasets and convert month to a character variable_*

``` r
# bind cleaned 2016 and 2017 precip tibbles, numeric months -> names

precip_tidy = bind_rows(precip_2016, precip_2017) %>% 
  mutate(month = month.name[month]) 
precip_tidy
```

    ## # A tibble: 20 x 3
    ##    month     total_precip year 
    ##    <chr>            <dbl> <chr>
    ##  1 January          3.23  2016 
    ##  2 February         5.32  2016 
    ##  3 March            2.24  2016 
    ##  4 April            1.78  2016 
    ##  5 May              5.19  2016 
    ##  6 June             3.20  2016 
    ##  7 July             6.09  2016 
    ##  8 August           3.96  2016 
    ##  9 September        4.53  2016 
    ## 10 October          0.620 2016 
    ## 11 November         1.47  2016 
    ## 12 December         2.32  2016 
    ## 13 January          2.34  2017 
    ## 14 February         1.46  2017 
    ## 15 March            3.57  2017 
    ## 16 April            3.99  2017 
    ## 17 May              5.64  2017 
    ## 18 June             1.40  2017 
    ## 19 July             7.09  2017 
    ## 20 August           4.44  2017

### About `trashwheel_data` and `precip_tidy`

``` r
# median sports balls in 2016
trashwheel_data %>% 
  group_by(year) %>% 
  filter(year == "2016") %>% 
  summarise(median(sports_balls))
```

    ## # A tibble: 1 x 2
    ##    year `median(sports_balls)`
    ##   <dbl>                  <int>
    ## 1 2016.                     26

``` r
# total precip in 2016
precip_tidy %>% 
  group_by(year) %>% 
  filter(year == "2016") %>% 
  summarise(sum(total_precip))
```

    ## # A tibble: 1 x 2
    ##   year  `sum(total_precip)`
    ##   <chr>               <dbl>
    ## 1 2016                 40.0

``` r
# total precip in 2017
precip_tidy %>% 
  group_by(year) %>% 
  filter(year == "2017") %>% 
  summarise(sum(total_precip))
```

    ## # A tibble: 1 x 2
    ##   year  `sum(total_precip)`
    ##   <chr>               <dbl>
    ## 1 2017                 29.9

There are **215** observations in the Mr. Trash Wheel dataset, and
**20** observations in the 2016-2017 monthly percipitation dataset. From
May 2014 until August NA, Mr. Trash Wheel collected **704.44** tons or
**3377** cubic yards of trash from the Baltimore Harbor. Over the same
course of time, the dumpster monthly averages of some of the objects
counted were as followed: **2156 plastic bottles**, **2582
polystyrene**, and **4.4510^{4} cigarette butts**. In 2017, the median
number of sports balls in a dumpster was **26 balls**. For the available
data, the total precipitation was **29.9 inches** in 2017 and **40.0
inches** in 2016.

## Problem 3

``` r
brfss_data = 
  data("brfss_smart2010")
```
